<script type="text/javascript">
	$(function(){
		$( "#start" )
		.button({
			icons: {
				secondary: "ui-icon-play"
			}
		});
			
		$( "#shutdown" )
		.button({
			icons: {
				secondary: "ui-icon-power"
			}
		});
			
		$( "#reboot" )
		.button({
			icons: {
				secondary: "ui-icon-arrowrefresh-1-s"
			}
		});

			
		$( "#console" )
		.button({
			icons: {
				secondary: "ui-icon-image"
			}
		});
		$( "#update" )
		.button({
			icons: {
				secondary: "ui-icon-check"
			}
		});
		
	$( "#start" )
	.click(function() {
		clearTimeout(polltimer);
		$.ajax({
        type: 'POST',
        url: "{% url instance-startup cluster.slug instance.name %}",
        dataType: 'json',
        success: function(data) {
			$("#actions_container_inner").empty();
			$("#actions_container_inner").html("<div class='span4'>"+data.action+"</div>");
			setTimeout(load_data, 0);

        }
    });	 
		return false; });
		
	$( "#shutdown" )
	.click(function() {
		clearTimeout(polltimer);
		$.ajax({
        type: 'POST',
        url: "{% url instance-shutdown cluster.slug instance.name %}",
        dataType: 'json',
        success: function(data) {
			$("#actions_container_inner").empty();
			$("#actions_container_inner").html("<div class='span4'>"+data.action+"</div>");
			setTimeout(load_data, 0);
			
        }
    });	 
		return false; });
		
	$( "#reboot" )
	.click(function() {
		clearTimeout(polltimer);
		$.ajax({
        type: 'POST',
        url: "{% url instance-reboot cluster.slug instance.name %}",
        dataType: 'json',
        success: function(data) {
			$("#actions_container_inner").empty();
			$("#actions_container_inner").html("<div class='span4'>"+data.action+"</div>");
			setTimeout(load_data, 0);

        }
    });	 
		return false; });	
			
});
</script>
{% load i18n %}
<table>
{% if not instance.is_locked %}
	{% if instance.oper_state %}
		<div id="actions_container_inner" class="row-fluid">
			<div class="span4"><a class="btn btn-danger" id="shutdown" href="#"><i class='icon-stop'></i> {% trans "Shutdown" %}</a></div>
			<div class="span4"><a class="btn btn-warning" id="reboot" href="#"><i class='icon-refresh'></i> {% trans "Reboot" %}</a></div>
			<div class="span4"><a class="btn btn-inverse" id="console" href="{% url instance-vnc cluster.slug instance.name %}"><i class='icon-terminal'></i> {% trans "Console" %}</a></div>
		</div>
	{% else %}
		<div id="actions_container_inner" class="row-fluid">
		<div class="span4"><a class="btn btn btn-success" id="start" href="#"><i class="icon-play"></i> {% trans "Start" %}</a></div>
		</div>
	{% endif %}
{% else %}
	<div id="actions_container_inner" class="row-fluid">
		<div class="span4" id="show_no_actions"><em>{{ instance.is_locked|capfirst }}</em></div>
	</div>
{% endif %}

</table>

<div id="instance_status" style="display:none;">{{ instance.oper_state|yesno:"Running,Stopped" }}</div>
