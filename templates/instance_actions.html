<script type="text/javascript">
	$(function(){
		$( "#start" )
		.button({
			icons: {
				secondary: "ui-icon-play"
			}
		});
			
		$( "#shutdown" )
		.button({
			icons: {
				secondary: "ui-icon-power"
			}
		});
			
		$( "#reboot" )
		.button({
			icons: {
				secondary: "ui-icon-arrowrefresh-1-s"
			}
		});

			
		$( "#console" )
		.button({
			icons: {
				secondary: "ui-icon-image"
			}
		});
		$( "#update" )
		.button({
			icons: {
				secondary: "ui-icon-check"
			}
		});
		
	$( "#start" )
	.click(function() {
		clearTimeout(polltimer);
		$.ajax({
        type: 'POST',
        url: "{% url instance-startup cluster.slug instance.name %}",
        dataType: 'json',
        success: function(data) {
			$("#actions_container_inner").empty();
			$("#actions_container_inner").html("<td>"+data.action+"<td>");
			setTimeout(load_data, 2000);

        }
    });	 
		return false; });
		
	$( "#shutdown" )
	.click(function() {
		clearTimeout(polltimer);
		$.ajax({
        type: 'POST',
        url: "{% url instance-shutdown cluster.slug instance.name %}",
        dataType: 'json',
        success: function(data) {
			$("#actions_container_inner").empty();
			$("#actions_container_inner").html("<td>"+data.action+"<td>");
			setTimeout(load_data, 2000);
			
        }
    });	 
		return false; });
		
	$( "#reboot" )
	.click(function() {
		clearTimeout(polltimer);
		$.ajax({
        type: 'POST',
        url: "{% url instance-reboot cluster.slug instance.name %}",
        dataType: 'json',
        success: function(data) {
			$("#actions_container_inner").empty();
			$("#actions_container_inner").html("<td>"+data.action+"<td>");
			setTimeout(load_data, 2000);

        }
    });	 
		return false; });	
			
});
</script>
{% load i18n %}
<table>
{% if ready %}
	{% if instance.oper_state %}
		{% if instance.admin_state %}
		<tr id="actions_container_inner">
			<td><a id="shutdown" href="#">{% trans "Shutdown" %}</a></td>
			<td><a id="reboot" href="#">{% trans "Reboot" %}</a></td>
			<td><a id="console" href="{% url instance-vnc cluster.slug instance.name %}">{% trans "Console" %}</a></td>
		</tr>
		{% else %}
		<tr id="actions_container_inner"> 
			<td id="show_no_actions"><em>{% trans "Instance is shutting down, no actions allowed" %}</em></td>
		</tr>
		{% endif %}
	{% else %}
		<tr id="actions_container_inner">
		<td colspan=3><a id="start" href="#">{% trans "Start" %}</a></td>
		</tr>
	{% endif %}
{% else %}
	<tr id="actions_container_inner">
		<td id="show_no_actions"><em>{% trans "Instance is being created, no actions allowed." %}</em></td>
	</tr>
{% endif %}

</table>

<div id="instance_status" style="display:none;">{{ instance.oper_state|yesno:"Running,Stopped" }}</div>
